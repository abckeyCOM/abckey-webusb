<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>abckey</title>
</head>

<body>
  <button onclick="add()">add</button>
  <button onclick="cmd()">cmd</button>
  <button onclick="GetPublicKey()">GetPublicKey</button>
  <script src="../dist/_index.js"></script>
  <script>
    let abckey = require('abckey').default;
    abckey = new abckey({
      debug: true
    })

    abckey.onDisconnect(e => {
      console.log(e)
    })

    abckey.onRead(msg => {
      console.log('onRead', msg)
    })

    async function add() {
      const result = await abckey.add()
      console.log('add', result)
    }

    async function cmd() {
      const type = 'Initialize'
      const data = { message: 'test' }
      const result = await abckey.cmd(type, data)
      console.log('cmd', result)
    }

    async function GetPublicKey() {
      const type = 'GetPublicKey'
      const data = {
        addressN: [
          (49 | 0x80000000) >>> 0,
          (0 | 0x80000000) >>> 0,
          (0 | 0x80000000) >>> 0
        ],
        coinName: 'Bitcoin',
        scriptType: 4,
        showDisplay: false
      }
      const result = await abckey.cmd(type, data)
      console.log('cmd', result)
    }
  </script>
</body>

</html>
